<div ng-cloak id="cards-container" ng-hide="game.state === 'game ended' || game.state ==='game dissolved'">
  <div id="cards" class='hand'>

    <span ng-show="winnerPicked()"></span>

    <div ng-style="{'cursor':'pointer'}" class="col20" id='answers' ng-click="pickCard(card)" ng-hide="showTable || isCzar()"
    ng-repeat="card in game.players[game.playerIndex].hand" ng-animate="{enter:'animated fadeInUp', leave: 'animated fadeInOut'}">
      <div class="cfh-card valign-wrapper p-5">
        <span ng-bind-html-unsafe="card.text"></span>
        <span id='selection-number' ng-show="showFirst(card)"> 1 </span>
        <span id='selection-number' ng-show="showSecond(card)"> 2 </span>
      </div>
    </div>

    <span ng-repeat="answer in game.table">
        <div class="cfh-card valign-wrapper col20 p-5" ng-style="pointerCursorStyle()" id='table' ng-click="pickWinning(answer)" ng-show="showTable || isCzar()"
        ng-repeat="card in answer.card" ng-animate="{enter:'animated bounceInLeft'}"
        style="background-color:{{winningColor($parent.$index)}}">
            <span ng-bind-html-unsafe="card.text"></span>
            <span id='selection-number' ng-show="firstAnswer($index)"> 1 </span>
            <span id='selection-number' ng-show="secondAnswer($index)"> 2 </span>
        </div>
    </span>

  </div>
</div>

<div id="info-container" ng-show="game.state === 'awaiting players'">
  <div id="inner-info">
    <div id="lobby-how-to-play">How To Play</div>
    <div id="share-link">
      <span class="btn-large transparent font-big">
        <i class="material-icons">share</i>
      </span>
      <a id="click-tag"
        ng-click="showModal1()"
        class="btn-floating waves-effect waves-light btn-large tooltipped"
        data-position="bottom" data-delay="50" data-tooltip="Send Invites to CFH users"
      >
        <i class="material-icons">group_add</i>
      </a>
      <a id="click-tag"
        ng-click="showModal2()"
        class="btn-floating waves-effect waves-light btn-large tooltipped"
        data-position="bottom" data-delay="50" data-tooltip="Send Invites to Guests"
      >
        <i class="material-icons">mood</i>
      </a>
    </div>
    <ol id="oh-el">
      <li>Each player begins with, and will always have, 10 white answer cards.</li>
      <li>For each round, one player is randomly chosen as the Card Czar.</li>
      <li>Everyone else answers the black question card by clicking on the answer card they want to use.</li>
      <li>The Card Czar then picks a favorite answer, and whoever played that answer wins the round.</li>
      <li>*Want to adorn your avatar with a glorious crown? Donate to charity after the game!</li>
    </ol>
    <button onclick="startIntro();">Get a tour</button>
  </div>

  <!-- modal 1 -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h5>Search for users to send invites to</h5>
      <div id="modal-body">
        <input type="text" ng-keyup="searchUser()" ng-model="searchString"/>
        <li ng-repeat="user in users" >
          <p>
            <input type="checkbox" id="{{ user.name }}" ng-model="user.selected" ng-click="countCheckedBox()" ng-disabled="checkedBoxCount > 10" />
            <label for="{{ user.name }}">{{ user.name }}</label>
          </p>
        </li>
      </div>
    <div class="modal-footer">
      <a href="" ng-click="emailUsers()" class="modal-action modal-close waves-effect waves-green btn-flat"
        ng-disabled="checkedBoxCount < 2"
        >Send</a>
    </div>
    </div>
    <div class="clear"></div>
  </div>

  <!-- modal 2 -->
  <div id="modal2" class="modal">
    <div class="modal-content">
      <h5> Send Invites To Guests </h5>
      <div id="modal-body">
        Email: <input type="text" ng-keyup="checkEmail()" ng-model="guestEmail"/>
      </div>
    <div class="modal-footer">
      <a 
        href=""
        class="modal-action modal-close waves-effect waves-green btn-flat"
        ng-disabled="!enableSendGuestInvite"
        ng-click="emailGuests()"
      >Send</a>
    </div>
    </div>

    <div class="clear"></div>
  </div>
</div>

<div class="waiting" ng-show="game.state === 'awaiting players'">
  <img src="img/p-cards.png" alt="" />
  <p>Cards will appear here when game starts</p>
</div>

<div id="game-end-container" ng-show="game.state === 'game ended' || game.state ==='game dissolved'" class="center">
  <div id="inner-info-exit">
    <div class="game-end-answer-text" ng-show="game.state ==='game dissolved' && game.gameWinner === -1">
      <h2>What would you like to do now?</h2>
      <p>You might consider donating to charity to atone for the horrifying answers you've submitted. Donating will also place a lovely crown on your avatar's head.</p>
    </div>
    <div class="game-end-answer-text" ng-show="game.state === 'game ended' || game.gameWinner !== -1">
      <h2>What would you like to do now?</h2>
      Help yourself to another game or help a child in need? Donating will also place a lovely crown on your avatar's head.
    </div>
    <div id='inner-text-container' style="margin-bottom: 20px;">
      <a href='/#!/app'>
      <span class="btn"  ng-click="game.joinGame('joinNewGame')">
        Join a New Game
      </span></a>
      <a href='/'>
        <span class="btn" id="exit-match">
        Return to Lobby
        </span>
      </a>
    </div>
  </div>

  <div id="charity-widget-container" class="center" style="text-align: center !important">
      <!-- This is real -->
      <a href="http://www.crowdrise.com" id="crowdriseStaticLink-fundraiser-121142" title="Fundraising Websites on Crowdrise">Fundraising Websites - Crowdrise</a>
      <script type="text/javascript" src="https://www.crowdrise.com/widgets/donate/fundraiser/121142/?callback=userDonationCb"></script>
      <!-- This is for testing -->
      <!-- <a href="http://www.crowdrise.com" id="crowdriseStaticLink-project-36715" title="Fundraising Websites on Crowdrise">Fundraising Websites - Crowdrise</a> -->
      <!-- <script type="text/javascript" src="https://apisandbox.crowdrise.com/widgets/donate/project/36715/?callback=userDonationCb"></script> -->
  </div>
</div>
<div id="czar-blank-container" ng-show="isCzar() && game.table.length===0 && game.state !== 'game dissolved' && game.state !== 'awaiting players'" class="center">
  <div id="czar-blank-inner" style="margin-bottom: 20px;">
    <h5 class="btn btn-new">You are the Card Czar!</h5>
    <h6 class="font-18">Players are choosing their answers. Prepare to select a winner.</h6>
  </div>
  <div id='charity-fact-container'>
    <h5 class="btn btn-help">Did you know?</h5>

    <h6 class="font-18 mb-20">
       {{ makeAWishFact }}
    </h6>

    <div id='charity-logo-container'>
      <img src='/img/make-a-wish-logo-white-large.png'/>
    </div>

  </div>
</div>
<script type="text/javascript">
      function startIntro(){
        var intro = introJs();
          intro.setOptions({
            steps: [
              { 
                intro: "Hi, I'm Jade. I'll be giving you a tour the game. Click Next to get Started. You can end the tour anytime by clicking Skip."
              },
              {
                element: document.querySelector('#info-container'),
                intro: "This is a tooltip."
              },
              {
                element: document.querySelectorAll('#step2')[0],
                intro: "Ok, wasn't that fun?",
                position: 'right'
              }
            ]
          });
          intro.start();
      }
    </script>
